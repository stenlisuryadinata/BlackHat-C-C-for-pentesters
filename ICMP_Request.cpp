#include<iostream>
#include <string>
#include <cstdio>
#include <memory>
#include <array>

int main() {
    std::string host = "google.com";
    std::string ping_cmd;

    #ifdef _WIN32
        // For Windows
        ping_cmd = "ping -n 1 " + host;
    #else
        // For Linux
        ping_cmd = "ping -c 1 " + host;
    #endif

    std::array<char, 128> buffer;
    std::string result;

    std::unique_ptr<FILE, decltype(&pclose)> pipe(popen(ping_cmd.c_str(), "r"), pclose);

    if (!pipe) {
        std::cerr << "Error: failed to execute command" << std::endl;
        return EXIT_FAILURE;
    }

    while (fgets(buffer.data(), buffer.size(), pipe.get()) != nullptr) {
        result += buffer.data();
    }

    if (result.find("bytes from") != std::string::npos) {
        std::cout << "Host " << host << " is up" << std::endl;
    } else {
        std::cout << "Host " << host << " is down" << std::endl;
    }

    return EXIT_SUCCESS;
}